3636. Threshold Majority Queries

You are given an integer array `nums` of length `n` and an array `queries`, where `queries[i] = [li, ri, thresholdi]`.

Return an array of integers `ans` where `ans[i]` is equal to the element in the subarray `nums[li...ri]` that appears at least `thresholdi` times, selecting the element with the highest frequency (choosing the smallest in case of a tie), or `-1` if no such element exists.

 

**Example 1:**
```
Input: nums = [1,1,2,2,1,1], queries = [[0,5,4],[0,3,3],[2,3,2]]

Output: [1,-1,2]

Explanation:

Query	Sub-array	Threshold	Frequency table	Answer
[0, 5, 4]	[1, 1, 2, 2, 1, 1]	4	1 → 4, 2 → 2	1
[0, 3, 3]	[1, 1, 2, 2]	3	1 → 2, 2 → 2	-1
[2, 3, 2]	[2, 2]	2	2 → 2	2
```

**Example 2:**
```
Input: nums = [3,2,3,2,3,2,3], queries = [[0,6,4],[1,5,2],[2,4,1],[3,3,1]]

Output: [3,2,3,2]

Explanation:

Query	Sub-array	Threshold	Frequency table	Answer
[0, 6, 4]	[3, 2, 3, 2, 3, 2, 3]	4	3 → 4, 2 → 3	3
[1, 5, 2]	[2, 3, 2, 3, 2]	2	2 → 3, 3 → 2	2
[2, 4, 1]	[3, 2, 3]	1	3 → 2, 2 → 1	3
[3, 3, 1]	[2]	1	2 → 1	2
```

**Constraints:**

* `1 <= nums.length == n <= 10^4`
* `1 <= nums[i] <= 10^9`
* `1 <= queries.length <= 5 * 10^4`
* `queries[i] = [li, ri, thresholdi]`
* `0 <= li <= ri < n`
* `1 <= thresholdi <= ri - li + 1`

# Submissions
---
**Solution 1: (Brute Force)**
```
Runtime: 672 ms, Beats 91.67%
Memory: 460.91 MB, Beats 58.33%
```
```c++
class Solution {
public:
    vector<int> subarrayMajority(vector<int>& nums, vector<vector<int>>& queries) {
        int n = nums.size();
        vector<int> a = nums;
        sort(a.begin(), a.end());
        a.erase(unique(a.begin(), a.end()), a.end());
        int m = a.size();
        map<int, int> p;
        for (int i = 0; i < m; i++) p[a[i]] = i;
        for (int& x : nums) x = p[x];
        vector<vector<int>> cnt(n + 1, vector<int>(m));
        for (int i = 1; i <= n; i++) {
            cnt[i] = cnt[i-1];
            cnt[i][nums[i-1]]++;
        }
        int q = queries.size();
        vector<int> ans(q, -1);
        for (int i = 0; i < q; i++) {
            int hf = 0, v = -1;
            int l = queries[i][0], r = queries[i][1], th = queries[i][2];
            for (int j = 0; j < m; j++) {
                int freq = cnt[r+1][j] - cnt[l][j];
                if (freq > hf) hf = freq, v = j;
            }
            if (hf >= th) ans[i] = a[v];
        }
        return ans;
    }
};
```
