3686. Number of Stable Subsequences

You are given an integer array `nums`.

A **subsequence** is **stable** if it does not contain **three** consecutive elements with the **same** parity when the subsequence is read in order (i.e., consecutive inside the subsequence).

Return the number of stable subsequences.

Since the answer may be too large, return it **modulo** `109 + 7`.

 

**Example 1:**
```
Input: nums = [1,3,5]

Output: 6

Explanation:

Stable subsequences are [1], [3], [5], [1, 3], [1, 5], and [3, 5].
Subsequence [1, 3, 5] is not stable because it contains three consecutive odd numbers. Thus, the answer is 6.
```

**Example 2:**
```
Input: nums = [2,3,4,2]

Output: 14

Explanation:

The only subsequence that is not stable is [2, 4, 2], which contains three consecutive even numbers.
All other subsequences are stable. Thus, the answer is 14.
```

**Constraints:**

* `1 <= nums.length <= 10^5`
* `1 <= nums[i] <= 10`

# Submissions
---
**Solution 1: (DP Bottom-Up)**

Track the count of subsequences ending:

with one- and two-even numbers (one[0] and two[0]).
with one- and two-odd numbers (one[1] and two[1]).
When we see an even number (parity is 0), it:

turns one-even sequences into two-even:
two[0] += one[0]
starts a new one-even subsequence, and turns one-odd and two-odd sequences into one-even.
one[0] += 1 + one[1] + two[1]
note that we update two before changing one.
Apply the same logic for odd numbers. Return the sum of all counts.

Complexity
Time: O(n)
Memory: O(1)

```
Runtime: 15 ms, Beats 25.00%
Memory: 158.01 MB, Beats 16.67%
```
```c++
class Solution {
public:
    int countStableSubsequences(vector<int>& nums) {
        long long one[2] = {}, two[2] = {}, mod = 1000000007;
        for (int n : nums) {
            auto p = n % 2;
            two[p] = (two[p] + one[p]) % mod;
            one[p] = (one[p] + 1 + one[!p] + two[!p]) % mod;
        }
        return (one[0] + one[1] + two[0] + two[1]) % mod;
    }
};
```
