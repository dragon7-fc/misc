2681. Power of Heroes

You are given a **0-indexed** integer array `nums` representing the strength of some heroes. The **power** of a group of heroes is defined as follows:

* Let `i0, i1, ... ,ik` be the indices of the heroes in a group. Then, the power of this group is `max(nums[i0], nums[i1], ... ,nums[ik])^2 * min(nums[i0], nums[i1], ... ,nums[ik])`.

Return the sum of the **power** of all non-empty groups of heroes possible. Since the sum could be very large, return it modulo `10^9 + 7`.

 

**Example 1:**
```
Input: nums = [2,1,4]
Output: 141
Explanation: 
1st group: [2] has power = 22 * 2 = 8.
2nd group: [1] has power = 12 * 1 = 1. 
3rd group: [4] has power = 42 * 4 = 64. 
4th group: [2,1] has power = 22 * 1 = 4. 
5th group: [2,4] has power = 42 * 2 = 32. 
6th group: [1,4] has power = 42 * 1 = 16. 
​​​​​​​7th group: [2,1,4] has power = 42​​​​​​​ * 1 = 16. 
The sum of powers of all groups is 8 + 1 + 64 + 4 + 32 + 16 + 16 = 141.
```

**Example 2:**
```
Input: nums = [1,1,1]
Output: 7
Explanation: A total of 7 groups are possible, and the power of each group will be 1. Therefore, the sum of the powers of all groups is 7.
```

**Constraints:**

* `1 <= nums.length <= 10^5`
* `1 <= nums[i] <= 10^9`

# Submissions
---
**Solution 1: (Sort, math)**
```
Runtime: 145 ms
Memory: 92.9 MB
```
```c++
class Solution {
public:
    int sumOfPower(vector<int>& nums) {
        long long res = 0, s = 0, base = 1e9 + 7;
        sort(nums.begin(), nums.end());
        for (int x: nums) {
            res = (res + (s + x) * x % base * x % base) % base;
            s = (s * 2 + x) % base;
        }
        return res;
    }
};
```

**Solution 2: (Sort, Prefix Sum, math)**

    nums = [ 2,  1,  4]
             1   2   4
    a            1   4
                12 128
    ans      1  13 141
             

             a   b   c   d
             -
             a^3
             -----
             a^3 + b^3 + b^2 * a
             ---------
             a^3 + b^3 + c^3 + c^2 * (b + 2a) + b^2 * a
             ^^^^^^^^^^^^^^^   ^^^^^^^^^^^^^^^^^^^^^^^^^
                                     --pre---
             ---------------
             a^3 + b^3 + c^3 + d^3 + d^2 * (c + 2b + 4a) + c^2 * (b + 2a) + b^2 * a
             ^^^^^^^^^^^^^^^   -------------------------   ^^^^^^^^^^^^^^^^^^^^^^^^
                               d * d * (pre * 2 + c + d)
```
Runtime: 16 ms, Beats 51.24%
Memory: 98.84 MB, Beats 70.25%
```
```c++
class Solution {
public:
    int sumOfPower(vector<int>& nums) {
        int MOD = 1e9 + 7;
        long long ans = 0, pre = 0;
        sort(nums.begin(), nums.end());
        for (auto num: nums) {
            ans = (ans + ((((pre + num) * num) % MOD) * num) % MOD) % MOD;
            pre = (pre * 2 + num) % MOD;
        }
        return ans;
    }
};
```

